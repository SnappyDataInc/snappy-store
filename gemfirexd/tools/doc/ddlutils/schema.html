<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.7">
<meta name="Forrest-skin-name" content="tigris">
<style type="text/css">
          /*  */
          @import "skin/tigris.css";
          @import "skin/quirks.css";
          @import "skin/inst.css";
         /*   */
        </style>
<link media="print" href="skin/print.css" type="text/css" rel="stylesheet">
<link href="skin/forrest.css" type="text/css" rel="stylesheet">
<link rel="shortcut icon" href="">
<script type="text/javascript" src="skin/tigris.js"></script><script src="skin/menu.js" language="javascript" type="text/javascript"></script>
<title>The data schema used by DdlUtils</title>
<meta content="text/css" http-equiv="Content-style-type">
</head>
<body class="composite" onload="focus()">
<div id="banner">
<table width="100%" cellpadding="8" cellspacing="0" border="0">
<tr>
<td align="left">
<div>
<a href="http://db.apache.org"><img class="logoImage" alt="Apache DB" src="images/db-logo.png"></a>
</div>
<span class="alt">Apache DB</span></td><td align="center">
<div>
<a href="http://db.apache.org/ddlutils">DdlUtils</a>
</div>
</td><td valign="top" align="right">
<div class="right" align="right" id="login">
<form target="_blank" action="http://www.google.com/search" method="get">
<select name="as_sitesearch"><option value="">Search...</option><option value="http://db.apache.org/ddlutils">The DdlUtils site</option><option value="">The web</option></select> for
		      <input size="15" name="as_q" id="query" type="text"><input name="Search" value="Go" type="submit">
</form>
</div>
</td>
</tr>
</table>
</div>
<div id="toptabs" class="tabs">
<table border="0" cellspacing="0" cellpadding="4">
<tr>
<th><a class="base-selected" href="index.html">Home</a></th>
</tr>
</table>
</div>
<table width="100%" border="0" cellpadding="0" cellspacing="0" id="breadcrumbs">
<tr>
<td></td><td>
<div align="right">
<script type="text/javascript" language="JavaScript"><!--
                 document.write("Published: " + document.lastModified);
                 //  --></script>
</div>
</td>
</tr>
</table>
<table id="main" width="100%" cellpadding="4" cellspacing="0" border="0">
<tr valign="top">
<td width="20%" id="leftcol">
<div id="navcolumn">
<div class="toolgroup" id="projecttools">
<div class="label">
<strong>Section</strong>
</div>
<div class="menu">
<div class="body">
<div>
<a href="">About</a>
    
<div>
<a href="index.html">Home</a>
</div>
    
<div>
<a class="external" href="http://issues.apache.org/jira/browse/DDLUTILS?report=com.atlassian.jira.plugin.system.project:changelog-panel">Release Notes</a>
</div>
    
<div>
<a href="mail-lists.html">Mailing lists</a>
</div>
    
<div>
<a class="external" href="http://issues.apache.org/jira/secure/BrowseProject.jspa?id=10731">Bug database (JIRA)</a>
</div>
  
</div>
<div>
<a href="">How to get</a>
    
<div>
<a href="download.html">Binaries &amp; Source</a>
</div>
    
<div>
<a class="external" href="http://svn.apache.org/viewvc/db/ddlutils/trunk/">View source repository</a>
</div>
    
<div>
<a href="svn-info.html">Source repository info</a>
</div>
  
</div>
<div>
<a href="">Documentation</a>
    
<div>
<a href="documentation.html">Summary</a>
</div>
    
<div>
<a href="">Support for databases</a>
      
<div>
<a href="database-support.html">General info</a>
</div>
      
<div>
<a href="databases/axion.html">Axion</a>
</div>
      
<div>
<a href="databases/db2.html">DB2</a>
</div>
      
<div>
<a href="databases/derby.html">Derby/Cloudscape</a>
</div>
      
<div>
<a href="databases/firebird.html">Firebird</a>
</div>
      
<div>
<a href="databases/hsqldb.html">HSQLDB</a>
</div>
      
<div>
<a href="databases/interbase.html">Interbase</a>
</div>
      
<div>
<a href="databases/maxdb.html">MaxDB/SapDB</a>
</div>
      
<div>
<a href="databases/mckoi.html">McKoi</a>
</div>
      
<div>
<a href="databases/mysql.html">MySql</a>
</div>
      
<div>
<a href="databases/oracle.html">Oracle</a>
</div>
      
<div>
<a href="databases/postgresql.html">PostgreSQL</a>
</div>
      
<div>
<a href="databases/gemfirexd.html">GemFireXD</a>
</div>
      
<div>
<a href="databases/sqlserver.html">SQL Server</a>
</div>
      
<div>
<a href="databases/sybase.html">Sybase</a>
</div>
    
</div>
    
<div>
<a href="schema/">The XML schema format</a>
</div>
    
<div>
<a href="schema.html">Using the API</a>
</div>
    
<div>
<a href="ant/">The Ant tasks</a>
</div>
    
<div>
<a href="api-usage.html">Using the API</a>
</div>
    
<div>
<a href="api/">Javadoc</a>
</div>
  
</div>
</div>
</div>
</div>
</div>
<div class="strut">&nbsp;</div>
</td><td>
<div class="content">
<div align="right" id="topmodule">
<table width="100%" cellpadding="3" cellspacing="0" border="0">
<tr>
<td class="tasknav"><a href="http://www.apache.org/">apache.org</a> &gt; <a href="http://db.apache.org/">db</a> &gt; <a href="http://db.apache.org/ddlutils">ddlutils</a><script src="skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script></td><td class="tasknav" id="issueid">
<div align="right">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="schema.pdf"><img alt="PDF -icon" src="skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
</div>
</td>
</tr>
</table>
</div>
<div id="bodycol">
<div id="apphead">
<h2>
<em>The data schema used by DdlUtils</em>
</h2>
</div>
<div class="app" id="projecthome">
<ul class="minitoc">
<li>
<a href="#The+data+schema+used+by+DdlUtils">The data schema used by DdlUtils</a>
</li>
</ul> 
    
<a name="N1000D"></a><a name="The+data+schema+used+by+DdlUtils"></a>
<div class="h3">
<h3>The data schema used by DdlUtils</h3>
      
      
<p>
        DdlUtils uses a dynamic XML schema for representing data that tries to use table and column names as much as possible.
        It follows the following rules for choosing the tags and attributes to represent the table of a given row: 
      </p>
      
<ul>
        
<li>
          If the table name is a valid XML tag, then it will be used as the XML element for the row. E.g.
          <pre class="code">
&lt;MyTable ...&gt;...&lt;/MyTable&gt;</pre>
        
</li>
        
<li>
          If the table name is not a valid XML tag, but it is shorter than 255 characters and does not contain characters that would be illegal
          for an XML attribute, then the XML element will be <span class="codefrag">table</span> with an attribute <span class="codefrag">table-name</span> containing the name of the table.
          E.g.
          <pre class="code">
&lt;table table-name="My Table" ...&gt;...&lt;/table&gt;</pre>
          If the table name contains characters like the ampersand, then these will be escaped in the standard XML fashion (via entities):
          <pre class="code">
&lt;table table-name="Bread&amp;amp;Butter" ...&gt;...&lt;/table&gt;</pre> 
        
</li>
        
<li>
          If the table name is not a valid XML tag (not a valid tag or longer than 255 characters) and does not contain characters that would be illegal
          for an XML attribute, then the XML element will be <span class="codefrag">table</span> with a sub element <span class="codefrag">table-name</span> containing the name of the table.
           E.g.
          <pre class="code">
&lt;table ...&gt;
  &lt;table-name&gt;My Really Long Table Name ...&lt;/table-name&gt;
  ...
&lt;/table&gt;</pre>
        
</li>
        
<li>
          If the table name contains characters that are illegal in XML, then the same format as above is used, but the value is also Base-64 encoded. An
          additional attribute <span class="codefrag">base64</span> with the value <span class="codefrag">true</span> signifies that the value is Base-64 encoded. E.g.
          <pre class="code">
&lt;table ...&gt;
  &lt;table-name base64="true"&gt;TXlUYWJsZQ==&lt;/table-name&gt;
  ...
&lt;/table&gt;</pre>
        
</li>
      
</ul>
      
<p>
        The rules for the columns are similar:
      </p>
      
<ul>
        
<li>
          If the column name is a valid XML attribute name and not equal to <span class="codefrag">table-name</span> or <span class="codefrag">base64</span>, and the value is shorter than
          255 characters and does not contain any characters invalid in XML, then an XML attribute will be used for the column. This is true regardless
          of whether the table name is a valid tag:
          <pre class="code">
&lt;MyTable myColumn="..." ...&gt;...&lt;/MyTable&gt;</pre>
          or not:
          <pre class="code">
&lt;table table-name="My Table" myColumn="..." ...&gt;...&lt;/table&gt;</pre>
        
</li>
        
<li>
          If the column name is a valid XML attribute name and not equal to <span class="codefrag">table-name</span> or <span class="codefrag">base64</span>, but the value is not shorter
          than 255 characters or it contains characters that are not allowed in XML documents, then instead a sub element will be used with the column
          name as the tag name:
          <pre class="code">
&lt;MyTable ...&gt;
  &lt;myColumn&gt;...&lt;/myColumn&gt;
  ...
&lt;/MyTable&gt;</pre>
          or
          <pre class="code">
&lt;MyTable ...&gt;
  &lt;myColumn base64="true"&gt;...&lt;/myColumn&gt;
  ...
&lt;/MyTable&gt;</pre>
          if the value needs to be Base-64 encoded because of illegal characters.
        </li>
        
<li>
          If the column name is not a valid XML attribute name and it is shorter than 255 characters and does not contain characters that would be illegal
          for an XML attribute, or if the column name is equal to <span class="codefrag">column-name</span> or <span class="codefrag">base64</span>, then instead a sub element will be used
          for the column name which will have an attribute <span class="codefrag">column-name</span> for the column name and the value as text content:
          E.g.
          <pre class="code">
&lt;MyTable ...&gt;
  &lt;column column-name="the column"&gt;...&lt;/column&gt;
  ...
&lt;/MyTable&gt;</pre>
          or
          <pre class="code">
&lt;MyTable ...&gt;
  &lt;column column-name="the column" base64="true"&gt;...&lt;/column&gt;
  ...
&lt;/MyTable&gt;</pre>
          if the value needs to be Base-64 encoded.
        </li>
        
<li>
          If the column name is not a valid XML attribute name or it is longer than 255 characters or it contains illegal characters, then instead
          a <span class="codefrag">column-name</span> sub element is used with the column name as the text content (base64 encoded if necessary). The value will be in a
          corresponding <span class="codefrag">column-value</span> sub element:
          <pre class="code">
&lt;MyTable ...&gt;
  &lt;column&gt;
    &lt;column-name&gt;...&lt;/column-name&gt;
    &lt;column-value&gt;...&lt;/column-value&gt;
  &lt;/column&gt;
  ...
&lt;/MyTable&gt;</pre>
        
</li>
      
</ul>
    
</div>
  
</div>
</div>
</div>
</td>
</tr>
</table>
<div id="footer">
<table cellpadding="4" cellspacing="0" border="0">
<tr>
<td>
          Copyright &copy; 2005-2007 Apache Software Foundation.
      All rights reserved.
            <br>
<script type="text/javascript" language="JavaScript"><!--
              document.write(" - "+"Last Published: " + document.lastModified);
              //  --></script></td><td nowrap="nowrap" class="footerLogos"></td>
</tr>
</table>
</div>
</body>
</html>
